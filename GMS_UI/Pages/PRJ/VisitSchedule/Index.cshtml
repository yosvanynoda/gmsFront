@page
@model GMS_UI.Pages.PRJ.VisitSchedule.IndexModel
@{
    ViewData["Title"] = "Visit Schedule";
}

<div class="container-gms">
    <div class="card">
        <div class="card-header" style="background: linear-gradient(135deg, #7fb3b5, #5f9ea0); color: white;">
            <h4 style="color: white; margin: 0;">
                <i class="bi bi-calendar-week me-2"></i>Visit Schedule
            </h4>
            <p class="subtitle mb-0" style="color: rgba(255,255,255,0.9);">
                View and manage scheduled visits for the selected date
            </p>
        </div>
        <div class="card-body">
            <!-- Date Picker Section -->
            <div class="row mb-3">
                <div class="col-md-4">
                    <label class="form-label fw-bold" for="scheduleDate">Select Date</label>
                    <input type="date" class="form-control" id="scheduleDate" />
                </div>
                <div class="col-md-8 d-flex align-items-end">
                    <button type="button" class="btn btn-primary me-2" onclick="loadVisitSchedule()">
                        <i class="bi bi-search me-1"></i> Load Schedule
                    </button>
                    <button type="button" class="btn btn-outline-secondary" onclick="setToday()">
                        <i class="bi bi-calendar-date me-1"></i> Today
                    </button>
                </div>
            </div>

            <!-- Summary Cards -->
            <div class="row mb-3">
                <div class="col-md-4">
                    <div class="card bg-light">
                        <div class="card-body text-center py-2">
                            <h5 class="mb-0" id="totalVisits">0</h5>
                            <small class="text-muted">Total Visits</small>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card bg-light">
                        <div class="card-body text-center py-2">
                            <h5 class="mb-0 text-success" id="completedVisits">0</h5>
                            <small class="text-muted">Completed</small>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card bg-light">
                        <div class="card-body text-center py-2">
                            <h5 class="mb-0 text-primary" id="pendingVisits">0</h5>
                            <small class="text-muted">Pending</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Visit Schedule Grid -->
            <div id="visitScheduleGrid" class="ag-theme-balham gridIndexSize"></div>
        </div>
    </div>
</div>

@Html.AntiForgeryToken()

<script>
    window._csrfToken = document.querySelector('input[name="__RequestVerificationToken"]').value;
</script>
<script src="~/js/prj/visitSchedule/visitSchedule.js?v=@DateTime.Now.Ticks"></script>
