@page
@model GMS_UI.Pages.SUB.Subject.VisitPlanModel
@{
    ViewData["Title"] = "Visit Plan";
}

<div class="container-gms">
    <div class="card">
        <div class="card-header" style="background: linear-gradient(135deg, #7fb3b5, #5f9ea0); color: white;">
            <h4 style="color: white; margin: 0;">
                <i class="bi bi-calendar-check-fill me-2"></i>Visit Plan
            </h4>
            <p class="subtitle mb-0" style="color: rgba(255,255,255,0.9);">
                Scheduled and completed visits for the selected subject based on the study protocol
            </p>
        </div>
        <div class="card-body">
            <div class="alert alert-info mb-3">
                <i class="bi bi-info-circle me-2"></i>
                This shows the scheduled and completed visits for the selected subject.
            </div>

            <!-- Visit Plan Grid -->
            <div id="visitPlanGrid" class="ag-theme-balham gridIndexSize"></div>

            <input type="hidden" id="subjectId" value="@Model.SubjectId" />
            <input type="hidden" id="studyId" value="@Model.StudyId" />
            <input type="hidden" id="returnUrl" value="@Model.ReturnUrl" />
        </div>
        <div class="card-footer">
            <button type="button" class="btn btn-secondary" onclick="goBack()">
                <i class="bi bi-arrow-left me-1"></i> Back to Subject List
            </button>
        </div>
    </div>
</div>

@Html.AntiForgeryToken()

<script>
    window._csrfToken = document.querySelector('input[name="__RequestVerificationToken"]').value;
</script>
<script src="~/js/std/subject/visitPlan.js?v=@DateTime.Now.Ticks"></script>
